<!DOCTYPE html>
<html>
<head>
    <title>Portfolio Management</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Ihr Portfolio</h1>
    <form action="/addPosition" method="post">
        <input type="text" name="symbol" placeholder="Symbol" required>
        <input type="text" name="name" placeholder="Name der Aktie" required>
        <input type="number" step="0.01" name="purchase_price" placeholder="Kaufwert ($)" required>
        <input type="number" name="quantity" placeholder="Menge" required>
        <button type="submit">Position hinzufügen</button>
    </form>
    <table>
        <thead>
            <tr>
                <th>Symbol</th>
                <th>Name</th>
                <th>Kaufwert ($)</th>
                <th>Menge</th>
                <th>Aktueller Preis ($)</th>
                <th>Positionswert ($)</th>
                <th>Gewinn / Verlust seit Kauf ($)</th>
                <th>Aktionen</th>
            </tr>
        </thead>
        <tbody>
            <% positions.forEach(function(position) {
                let positionValue = position.currentPrice * position.quantity;
                let cost = position.purchase_price * position.quantity;
                let profitLoss = positionValue - cost;
            %>
            <tr>
                <td><%= position.symbol %></td>
                <td><%= position.name %></td>
                <td><%= position.purchase_price.toFixed(2) %></td>
                <td><%= position.quantity %></td>
                <td><%= position.currentPrice.toFixed(2) %></td>
                <td><%= positionValue.toFixed(2) %></td>
                <td><%= profitLoss.toFixed(2) %></td>
                <td>
                    <form method="POST" action="/deletePosition" style="display:inline;">
                        <input type="hidden" name="id" value="<%= position.id %>">
                        <button type="submit">Löschen</button>
                    </form>
                </td>
            </tr>
            <% }); %>
        </tbody>
    </table>
    <form action="/logout" method="get" style="display:inline;">
        <button type="submit">Abmelden</button>
    </form>
</body>
</html>